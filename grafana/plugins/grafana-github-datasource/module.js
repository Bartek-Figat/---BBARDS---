define(["@grafana/data","@grafana/runtime","lodash","@emotion/css","@grafana/ui","react"],((e,t,r,n,o,a)=>(()=>{"use strict";var l={644:e=>{e.exports=n},305:t=>{t.exports=e},545:e=>{e.exports=t},388:e=>{e.exports=o},980:e=>{e.exports=r},650:e=>{e.exports=a}},i={};function c(e){var t=i[e];if(void 0!==t)return t.exports;var r=i[e]={exports:{}};return l[e](r,r.exports,c),r.exports}c.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return c.d(t,{a:t}),t},c.d=(e,t)=>{for(var r in t)c.o(t,r)&&!c.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var u={};return(()=>{c.r(u),c.d(u,{plugin:()=>Qt});var e=c(305),t=c(545);function r(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){r(e,t,n[t])}))}return e}function o(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const a=(e,t,r,n)=>t?e.replace(t,r,n):t,l=(e,t,r={})=>{let i=n({},e);return Object.keys(i).forEach((e=>{if("refId"!==e){const c=i[e];if("string"==typeof c)i=o(n({},i),"query"===e?{[e]:a(t,c,r,"csv")}:{[e]:a(t,c,r)});else if(Array.isArray(c)){const a=c.map((e=>l(e,t,r)));i=o(n({},i),{[e]:a})}}})),i};var i,s,p,b,y,f,m=c(980);!function(e){e.Commits="Commits",e.Issues="Issues",e.Contributors="Contributors",e.Tags="Tags",e.Releases="Releases",e.Pull_Requests="Pull_Requests",e.Labels="Labels",e.Repositories="Repositories",e.Organizations="Organizations",e.GraphQL="GraphQL",e.Milestones="Milestones",e.Packages="Packages",e.Vulnerabilities="Vulnerabilities",e.Projects="Projects",e.ProjectItems="ProjectItems",e.Stargazers="Stargazers",e.Workflows="Workflows",e.Workflow_Usage="Workflow_Usage"}(i||(i={})),function(e){e.NPM="NPM",e.RUBYGEMS="RUBYGEMS",e.MAVEN="MAVEN",e.DOCKER="DOCKER",e.DEBIAN="DEBIAN",e.NUGET="NUGET",e.PYPI="PYPI"}(s||(s={})),function(e){e[e.ClosedAt=0]="ClosedAt",e[e.CreatedAt=1]="CreatedAt",e[e.MergedAt=2]="MergedAt",e[e.None=3]="None"}(p||(p={})),function(e){e[e.CreatedAt=0]="CreatedAt",e[e.ClosedAt=1]="ClosedAt"}(b||(b={})),function(e){e[e.CreatedAt=0]="CreatedAt",e[e.UpdatedAt=1]="UpdatedAt"}(y||(y={})),function(e){e[e.ORG=0]="ORG",e[e.USER=1]="USER"}(f||(f={}));const g=i.Issues,O=e=>{if(e.queryType===i.Projects){var t,r,n,o;if((0,m.isEmpty)(null===(t=e.options)||void 0===t?void 0:t.organization)&&(null===(r=e.options)||void 0===r?void 0:r.kind)===f.ORG)return!1;if((0,m.isEmpty)(null===(n=e.options)||void 0===n?void 0:n.user)&&(null===(o=e.options)||void 0===o?void 0:o.kind)===f.USER)return!1}return!!e.queryType};function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){d(e,t,r[t])}))}return e}const h={userId:"userId",login:"login",email:"email",avatarUrl:"avatarUrl",time:"time",timeEnd:"timeEnd",title:"title",text:"text",tags:"tags"};function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){j(e,t,r[t])}))}return e}function P(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}const E=t=>{if((e=>!("annotation"in e))(t))return t;const{annotation:r}=t,n=P(t,["annotation"]),{field:o,timeField:a}=r,l=P(r,["field","timeField"]);return i=w({},n),c=null!=(c={target:l,mappings:w({text:o?{source:e.AnnotationEventFieldSource.Field,value:o}:void 0,time:a?{source:e.AnnotationEventFieldSource.Field,value:a}:void 0},n.mappings)})?c:{},Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(c)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(c)).forEach((function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(c,e))})),i;var i,c};function S(e,t,r,n,o,a,l){try{var i=e[a](l),c=i.value}catch(e){return void r(e)}i.done?t(c):Promise.resolve(c).then(n,o)}function k(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function l(e){S(a,n,o,l,i,"next",e)}function i(e){S(a,n,o,l,i,"throw",e)}l(void 0)}))}}function C(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){C(e,t,r[t])}))}return e}function D(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}class q extends t.DataSourceWithBackend{query(r){return(r=>{r.app!==e.CoreApp.Dashboard&&r.app!==e.CoreApp.PanelViewer&&r.targets.forEach((e=>{let n={app:r.app,queryType:e.queryType};var o,a,l,i,c,u,s,f;"Issues"===e.queryType&&(n.timeField=b[null!==(a=null===(o=e.options)||void 0===o?void 0:o.timeField)&&void 0!==a?a:0]),"Pull_Requests"===e.queryType&&(n.timeField=p[null!==(i=null===(l=e.options)||void 0===l?void 0:l.timeField)&&void 0!==i?i:0]),"Workflows"===e.queryType&&(n.timeField=y[null!==(u=null===(c=e.options)||void 0===c?void 0:c.timeField)&&void 0!==u?u:0]),"Packages"===e.queryType&&(n.timeField=null!==(f=null==e||null===(s=e.options)||void 0===s?void 0:s.packageType)&&void 0!==f?f:"NPM"),(0,t.reportInteraction)("grafana_github_query_executed",n)}))})(r),super.query(r)}applyTemplateVariables(e,t){return((e,t,r)=>{let a=n({},t);return a=l(a,e,r),t.options&&(a=o(n({},a),{options:l(t.options,e,r)})),a})(this.templateSrv,e,t)}getLabels(e,t,r){var n=this;return k((function*(){return n.getResource("labels",{repository:e,owner:t,query:r})}))()}annotationQuery(t){var r=this;return k((function*(){var n;const{annotation:o}=t.annotation,a={targets:[D(T({},o),{datasourceId:r.id,refId:r.name})],range:t.range,interval:t.interval},l=yield r.query(a).toPromise();return(null==l||null===(n=l.data)||void 0===n?void 0:n.length)?function(t,r){const n=[];if(!t||!t.length)return n;let o=!1,a=!1;const l={};for(const e of t.fields)l[e.name.toLowerCase()]=e;r=v({field:{},regex:{}},r);const i=[],c=v({},h,null==r?void 0:r.field);for(const[e,t]of Object.entries(c)){const n=t?t.toLowerCase():"";if(n&&l[n]){const t={key:e,field:l[n]};switch(t.key){case"time":o=!0;break;case"text":a=!0;break;case"tags":t.split=","}const c=r.regex[t.key];c&&(t.regex=new RegExp(c)),i.push(t)}}if(!o){const r=t.fields.find((t=>t.type===e.FieldType.time));if(!r)return[];i.push({key:"time",field:r})}if(!a){var u;const n=t.fields.find((t=>t.type===e.FieldType.string));if(!n)return[];const o={key:"text",field:n};(null==r||null===(u=r.regex)||void 0===u?void 0:u.text)&&(o.regex=new RegExp(r.regex.text)),i.push(o)}for(let e=0;e<t.length;e++){const t={};for(const r of i){let n=r.field.values.get(e);if(r.regex){const e=r.regex.exec(n);e&&(n=e[1]?e[1]:e[0])}r.split&&(n=n.split(",")),t[r.key]=n}n.push(t)}return n}(l.data[0],{field:{time:o.timeField,text:o.field||"name"}}):[]}))()}getChoices(e){var t=this;return k((function*(){const r={targets:[D(T({},e),{refId:"metricFindQuery"})],range:{to:{},from:{}}};try{var n;const e=yield t.query(r).toPromise();return((null===(n=null==e?void 0:e.data[0])||void 0===n?void 0:n.fields)||[]).map((e=>e.name))||[]}catch(e){return Promise.reject(e)}}))()}metricFindQuery(t,r){var n=this;return k((function*(){const o={targets:[D(T({},t),{refId:"metricFindQuery"})],range:r.range,rangeRaw:r.rangeRaw};try{let r=yield n.query(o).toPromise();return!r||!r.data||r.data.length<0?[]:new e.DataFrameView(r.data[0]).map((e=>({value:e[t.key||""]||e[t.field||"name"],text:e[t.field||"name"]})))}catch(e){return Promise.reject(e)}}))()}constructor(e){super(e),this.templateSrv=(0,t.getTemplateSrv)(),this.filterQuery=e=>O(e)&&!e.hide,this.annotations={prepareAnnotation:E}}}var F=c(644),x=c(650),I=c.n(x),N=c(388),R=Object.defineProperty,A=Object.defineProperties,Q=Object.getOwnPropertyDescriptors,G=Object.getOwnPropertySymbols,L=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable,B=(e,t,r)=>t in e?R(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,U=(e,t)=>{for(var r in t||(t={}))L.call(t,r)&&B(e,r,t[r]);if(G)for(var r of G(t))W.call(t,r)&&B(e,r,t[r]);return e};const _=({dataSourceName:e,docsLink:t,hasRequiredFields:r=!0,className:n})=>{const o=(0,N.useTheme2)(),a={container:(0,F.css)({p:{margin:0},"p + p":{marginTop:o.spacing(2)}}),text:(0,F.css)((l=U({},o.typography.body),i={color:o.colors.text.secondary,a:(0,F.css)({color:o.colors.text.link,textDecoration:"underline","&:hover":{textDecoration:"none"}})},A(l,Q(i))))};var l,i;return I().createElement("div",{className:(0,F.cx)(a.container,n)},I().createElement("p",{className:a.text},"Before you can use the ",e," data source, you must configure it below or in the config file. For detailed instructions,"," ",I().createElement("a",{href:t,target:"_blank",rel:"noreferrer"},"view the documentation"),"."),r&&I().createElement("p",{className:a.text},I().createElement("i",null,"Fields marked with * are required")))};var M=Object.defineProperty,z=Object.defineProperties,V=Object.getOwnPropertyDescriptors,H=Object.getOwnPropertySymbols,$=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable,Y=(e,t,r)=>t in e?M(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,K=(e,t)=>{for(var r in t||(t={}))$.call(t,r)&&Y(e,r,t[r]);if(H)for(var r of H(t))J.call(t,r)&&Y(e,r,t[r]);return e};const X=({children:e,title:t,description:r,isCollapsible:n=!1,isInitiallyOpen:o=!0,kind:a="section",className:l})=>{const{colors:i,typography:c,spacing:u}=(0,N.useTheme2)(),[s,p]=(0,x.useState)(!n||o),b=s?"angle-up":"angle-down",y="sub-section"===a,f=`${s?"Collapse":"Expand"} section ${t}`,m={header:(0,F.css)({display:"flex",justifyContent:"space-between",alignItems:"center"}),title:(0,F.css)({margin:0}),subtitle:(0,F.css)({margin:0,fontWeight:c.fontWeightRegular}),descriptionText:(0,F.css)((g=K({marginTop:u(y?.25:.5),marginBottom:0},c.bodySmall),O={color:i.text.secondary},z(g,V(O)))),content:(0,F.css)({marginTop:u(2)})};var g,O;return I().createElement("div",{className:l},I().createElement("div",{className:m.header},"section"===a?I().createElement("h3",{className:m.title},t):I().createElement("h6",{className:m.subtitle},t),n&&I().createElement(N.IconButton,{name:b,onClick:()=>p(!s),type:"button",size:"xl","aria-label":f})),r&&I().createElement("p",{className:m.descriptionText},r),s&&I().createElement("div",{className:m.content},e))};var Z=Object.defineProperty,ee=Object.defineProperties,te=Object.getOwnPropertyDescriptors,re=Object.getOwnPropertySymbols,ne=Object.prototype.hasOwnProperty,oe=Object.prototype.propertyIsEnumerable,ae=(e,t,r)=>t in e?Z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const le=e=>{var t,r=e,{children:n}=r,o=((e,t)=>{var r={};for(var n in e)ne.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&re)for(var n of re(e))t.indexOf(n)<0&&oe.call(e,n)&&(r[n]=e[n]);return r})(r,["children"]);return I().createElement(X,(t=((e,t)=>{for(var r in t||(t={}))ne.call(t,r)&&ae(e,r,t[r]);if(re)for(var r of re(t))oe.call(t,r)&&ae(e,r,t[r]);return e})({},o),ee(t,te({kind:"section"}))),n)},ie={ConfigEditor:{AccessToken:"data-testid Access Token"},QueryEditor:{QueryType:{container:{ariaLabel:"Query Type container"}},Owner:{input:"Query editor owner"},Repository:{input:"Query editor repository"},Query:{input:"Query editor query"},Ref:{input:"Query editor ref"},Number:{input:"Query editor number"}},AnnotationEditor:{container:"Annotation editor container"}},ce=ie;function ue(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function se(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){ue(e,t,r[t])}))}return e}function pe(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const be=e=>({externalLink:F.css`
      text-decoration: underline;
    `,radioButton:F.css`
      margin-bottom: ${e.spacing(2)};
    `});function ye(){return ye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ye.apply(this,arguments)}const fe=({label:e,labelWidth:t=8,tooltip:r,children:n})=>I().createElement(I().Fragment,null,I().createElement(N.InlineFormLabel,{width:t,className:"query-keyword",tooltip:r},e),n),me=()=>I().createElement("div",{className:"gf-form gf-form--grow"},I().createElement("div",{className:"gf-form-label gf-form-label--grow"})),ge=e=>{var t=ye({},function(e){if(null==e)throw new TypeError("Cannot destructure "+e);return e}(e));return I().createElement(Oe,null,I().createElement(fe,ye({},t)))},Oe=e=>I().createElement("div",{className:"gf-form-inline"},e.children,I().createElement(me,null));function de(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ve(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){de(e,t,r[t])}))}return e}function he(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const je=e=>{const[t,r]=(0,x.useState)(e.repository||""),[n,o]=(0,x.useState)(e.owner||"");return(0,x.useEffect)((()=>{r(e.repository||"")}),[e.repository]),(0,x.useEffect)((()=>{o(e.owner||"")}),[e.owner]),I().createElement(Oe,null,I().createElement(N.InlineFormLabel,{className:"query-keyword",tooltip:"The owner (organization or user) of the GitHub repository (example: 'grafana')",width:Pt},"Owner"),I().createElement(N.Input,{"aria-label":ce.QueryEditor.Owner.input,width:Et,value:n,onChange:e=>o(e.currentTarget.value),onBlur:t=>e.onChange(he(ve({},e),{owner:t.currentTarget.value}))}),I().createElement(N.InlineFormLabel,{className:"query-keyword",tooltip:"The name of the GitHub repository",width:Pt},"Repository"),I().createElement(N.Input,{"aria-label":ce.QueryEditor.Repository.input,width:Et,value:t,onChange:e=>r(e.currentTarget.value),onBlur:t=>e.onChange(he(ve({},e),{repository:t.currentTarget.value}))}))},we=()=>I().createElement(I().Fragment,null);function Pe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Ee=e=>{const[t,r]=(0,x.useState)(e.gitRef||"");return I().createElement(I().Fragment,null,I().createElement(ge,{labelWidth:Pt,label:"Ref (Branch / Tag)"},I().createElement(N.Input,{"aria-label":ce.QueryEditor.Ref.input,width:Et,value:t,onChange:e=>r(e.currentTarget.value),onBlur:t=>{return e.onChange((r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Pe(e,t,r[t])}))}return e}({},e),n=null!=(n={gitRef:t.currentTarget.value})?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(n)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))})),r));var r,n}})))};function Se(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ke(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Se(e,t,r[t])}))}return e}function Ce(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const Te=Object.keys(b).filter(((e,t)=>void 0!==b[t])).map(((e,t)=>({label:`${b[t]}`,value:t}))),De=e=>{const[t,r]=(0,x.useState)(e.query||"");return I().createElement(I().Fragment,null,I().createElement(ge,{labelWidth:Pt,label:"Query",tooltip:"For more information, visit https://docs.github.com/en/github/searching-for-information-on-github/searching-issues-and-pull-requests"},I().createElement(N.Input,{value:t,width:2*Et+Pt,onChange:e=>r(e.currentTarget.value),onBlur:t=>e.onChange(Ce(ke({},e),{query:t.currentTarget.value}))})),I().createElement(ge,{labelWidth:Pt,label:"Time Field",tooltip:"The time field to filter on the time range"},I().createElement(N.Select,{width:Et,options:Te,value:e.timeField||0,onChange:t=>e.onChange(Ce(ke({},e),{timeField:t.value}))})))};function qe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Fe=e=>{const[t,r]=(0,x.useState)(e.query||"");return I().createElement(I().Fragment,null,I().createElement(ge,{labelWidth:Pt,label:"Query",tooltip:"Query milestones by title"},I().createElement(N.Input,{value:t,width:2*Et+Pt,onChange:e=>r(e.currentTarget.value),onBlur:t=>{return e.onChange((r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){qe(e,t,r[t])}))}return e}({},e),n=null!=(n={query:t.currentTarget.value})?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(n)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))})),r));var r,n}})))};function xe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ie(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){xe(e,t,r[t])}))}return e}function Ne(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const Re=Object.keys(p).filter(((e,t)=>void 0!==p[t])).map(((e,t)=>({label:`${p[t]}`,value:t}))),Ae=Re[0].value,Qe=e=>{const[t,r]=(0,x.useState)(e.query||"");return I().createElement(I().Fragment,null,I().createElement(ge,{labelWidth:Pt,label:"Query",tooltip:"For more information, visit https://docs.github.com/en/github/searching-for-information-on-github/searching-issues-and-pull-requests"},I().createElement(N.Input,{value:t,width:Et,onChange:e=>r(e.currentTarget.value),onBlur:t=>e.onChange(Ne(Ie({},e),{query:t.currentTarget.value}))})),I().createElement(ge,{labelWidth:Pt,label:"Time Field",tooltip:"The time field to filter on the time range. WARNING: If selecting 'None', be mindful of the amount of data being queried. On larger repositories, querying all pull requests could easily cause rate limiting"},I().createElement(N.Select,{width:Et,options:Re,value:e.timeField||Ae,onChange:t=>e.onChange(Ne(Ie({},e),{timeField:t.value}))})))},Ge=()=>I().createElement(I().Fragment,null);function Le(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const We=e=>{const[t,r]=(0,x.useState)(e.query||"");return I().createElement(I().Fragment,null,I().createElement(ge,{labelWidth:Pt,label:"Query (optional)"},I().createElement(N.Input,{width:Et,value:t,onChange:e=>r(e.currentTarget.value),onBlur:t=>{return e.onChange((r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Le(e,t,r[t])}))}return e}({},e),n=null!=(n={query:t.currentTarget.value})?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(n)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))})),r));var r,n}})))};function Be(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Ue=e=>{const[t,r]=(0,x.useState)(e.query||"");return I().createElement(I().Fragment,null,I().createElement(ge,{labelWidth:Pt,label:"Query (optional)"},I().createElement(N.Input,{width:Et,value:t,onChange:e=>r(e.currentTarget.value),onBlur:t=>{return e.onChange((r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Be(e,t,r[t])}))}return e}({},e),n=null!=(n={query:t.currentTarget.value})?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(n)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))})),r));var r,n}})))};function _e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Me(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){_e(e,t,r[t])}))}return e}function ze(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const Ve=s.NPM,He=Object.keys(s).map((e=>({label:e.replace("/_/gi"," "),value:e}))),$e=e=>{const[t,r]=(0,x.useState)(e.names||"");return I().createElement(I().Fragment,null,I().createElement(ge,{labelWidth:Pt,label:"Package type"},I().createElement(N.Select,{options:He,value:e.packageType||Ve,width:Et,onChange:t=>e.onChange(ze(Me({},e),{packageType:t.value}))})),I().createElement(ge,{labelWidth:Pt,label:"Names",tooltip:"Search for packages using a comma delimited list of names"},I().createElement(N.Input,{value:t,width:2*Et+Pt,onChange:e=>r(e.currentTarget.value),onBlur:t=>e.onChange(ze(Me({},e.query),{names:t.currentTarget.value}))})))};function Je(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Ye=e=>{const[t,r]=(0,x.useState)(e.query||"");return I().createElement(I().Fragment,null,I().createElement(ge,{labelWidth:Pt,label:"Query (optional)"},I().createElement(N.Input,{width:Et,value:t,onChange:e=>r(e.currentTarget.value),onBlur:t=>{return e.onChange((r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Je(e,t,r[t])}))}return e}({},e),n=null!=(n={query:t.currentTarget.value})?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(n)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))})),r));var r,n}})))};function Ke(e,t,r,n,o,a,l){try{var i=e[a](l),c=i.value}catch(e){return void r(e)}i.done?t(c):Promise.resolve(c).then(n,o)}function Xe(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function l(e){Ke(a,n,o,l,i,"next",e)}function i(e){Ke(a,n,o,l,i,"throw",e)}l(void 0)}))}}function Ze(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function et(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Ze(e,t,r[t])}))}return e}function tt(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const rt=e=>{const{value:t,onChange:r}=e,[n,o]=(0,x.useState)(t||[]),[a,l]=(0,x.useState)(),i=e=>t=>{p(n.map(((r,n)=>n===e?tt(et({},r),{value:t.value}):r)))},c=e=>t=>{p(n.map(((r,n)=>n===e?tt(et({},r),{op:t.value}):r)))},u=e=>t=>{p(n.map(((r,n)=>n===e?tt(et({},r),{conjunction:t.value}):r)))},s=e=>()=>{p(n.filter(((t,r)=>r!==e)))};function p(e){o(e),r(e)}const b=t=>Xe((function*(){l(t);const r=n[t].key,o=yield e.loadOptions(r);return l(void 0),o})),y=n||[],f=["and","or"].map((e=>({label:e,value:e}))),m={loading:F.css`
      position: absolute;
      top: 0;
      padding: 8px 10px;
      font-weight: 500;
      font-size: 12px;
    `,wrapper:F.css`
      position: relative;
    `};return I().createElement("div",{className:"gf-form-inline"},y.map(((t,r)=>{return I().createElement(I().Fragment,null,I().createElement(N.SegmentAsync,{loadOptions:e.loadOptions,placeholder:"Key...",allowCustomValue:!0,value:t.key,onChange:(l=r,e=>{const t=n.map(((t,r)=>r===l?tt(et({},t),{key:e.value,value:""}):t));o(t)})}),I().createElement(N.Segment,{placeholder:"Operator...",value:t.op,onChange:c(r),options:e.ops}),I().createElement("span",{className:m.wrapper},I().createElement(N.SegmentAsync,{loadOptions:b(r),placeholder:"Value...",allowCustomValue:!0,value:t.value,onChange:i(r)}),a===r&&I().createElement("div",{className:m.loading},"Loading...")),I().createElement("a",{className:"gf-form-label query-part",onClick:s(r)},I().createElement(N.Icon,{name:"trash-alt"})),y.length>1&&r!==y.length-1&&I().createElement(N.Segment,{onChange:u(r),options:f,value:t.conjunction||"and"}));var l})),I().createElement("a",{className:"gf-form gf-form-label query-part",onClick:()=>{var t;o([...n,{key:"",value:"",op:(null===(t=e.ops[0])||void 0===t?void 0:t.value)||"="}])}},I().createElement(N.Icon,{name:"plus"})))};function nt(e,t,r,n,o,a,l){try{var i=e[a](l),c=i.value}catch(e){return void r(e)}i.done?t(c):Promise.resolve(c).then(n,o)}function ot(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function at(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){ot(e,t,r[t])}))}return e}function lt(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}rt.displayName="Filters";const it=[{label:"Organization",value:f.ORG},{label:"User",value:f.USER}],ct=[{label:"Type",value:"type"},{label:"Created At",value:"created_at"},{label:"Title",value:"Title"},{label:"Assignees",value:"Assignees"},{label:"Status",value:"Status"},{label:"Labels",value:"Labels"},{label:"Reviewers",value:"Reviewers"},{label:"Milestone",value:"Milestone"},{label:"Iteration",value:"Iteration"}],ut=[{label:"Equal",value:"="},{label:"Not Equal",value:"!="},{label:"Greater Than",value:">"},{label:"Less Than",value:"<"},{label:"Less Than or Equal",value:"<="},{label:"Greater Than or Equal",value:">="},{label:"Contains",value:"~"}],st=(pt=function*(e){return e?[]:ct},bt=function(){var e=this,t=arguments;return new Promise((function(r,n){var o=pt.apply(e,t);function a(e){nt(o,r,n,a,l,"next",e)}function l(e){nt(o,r,n,a,l,"throw",e)}a(void 0)}))},function(e){return bt.apply(this,arguments)});var pt,bt;function yt(e){if(e.includes("$"))return e;const t=parseInt(e,10);return isNaN(t)?void 0:t}const ft=e=>{const[t,r]=(0,x.useState)(e.organization||""),[n,o]=(0,x.useState)(e.user||""),[a,l]=(0,x.useState)(e.number),[i,c]=(0,x.useState)(e.kind||f.ORG),[u,s]=(0,x.useState)(e.filters||[]),p=i===f.ORG?"Organization":"User",b=i===f.ORG?"The organization for the GitHub project (example: 'grafana)":"The user who owns the Github project";return I().createElement(I().Fragment,null,I().createElement(Oe,null,I().createElement(N.InlineFormLabel,{className:"query-keyword",tooltip:"The owner of the GitHub project. Does not support classic projects.",width:Pt},"Project Owner"),I().createElement("div",{className:"gf-form"},I().createElement(N.RadioButtonGroup,{options:it,value:i,onChange:t=>{c(t),e.onChange(lt(at({},e),{kind:t}))},size:"md"}))),I().createElement(Oe,null,I().createElement(N.InlineFormLabel,{className:"query-keyword",tooltip:b,width:Pt},p),i===f.ORG&&I().createElement(N.Input,{"aria-label":ce.QueryEditor.Owner.input,width:Et,value:t,onChange:e=>r(e.currentTarget.value),onBlur:t=>e.onChange(lt(at({},e),{organization:t.currentTarget.value,kind:i}))}),i===f.USER&&I().createElement(N.Input,{"aria-label":ce.QueryEditor.Owner.input,width:Et,value:n,onChange:e=>o(e.currentTarget.value),onBlur:t=>e.onChange(lt(at({},e),{user:t.currentTarget.value,kind:i}))})),I().createElement(Oe,null,I().createElement(N.InlineFormLabel,{className:"query-keyword",tooltip:"The project number for the GitHub project (example: 123). Does not support classic projects.",width:Pt},"Project Number"),I().createElement(N.Input,{"aria-label":ce.QueryEditor.Number.input,width:Et,value:a,onChange:e=>l(yt(e.currentTarget.value)),onBlur:t=>e.onChange(lt(at({},e),{number:yt(t.currentTarget.value)}))})),a&&I().createElement(Oe,null,I().createElement("div",{className:"gf-form"},I().createElement(N.InlineFormLabel,{className:"query-keyword",width:Pt},"Filters"),I().createElement(rt,{onChange:t=>{s(t),e.onChange(lt(at({},e),{filters:t}))},loadOptions:st,value:u,ops:ut}))))};function mt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const gt=Object.keys(y).filter(((e,t)=>void 0!==y[t])).map(((e,t)=>({label:`${y[t]}`,value:t}))),Ot=e=>I().createElement(I().Fragment,null,I().createElement(ge,{labelWidth:Pt,label:"Time Field",tooltip:"The time field to filter on the time range"},I().createElement(N.Select,{width:Et,options:gt,value:e.timeField||0,onChange:t=>{var r,n;e.onChange((r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){mt(e,t,r[t])}))}return e}({},e),n=null!=(n={timeField:t.value})?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(n)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))})),r))}})));function dt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const vt=e=>{const[t,r]=(0,x.useState)(e.workflow);return I().createElement(I().Fragment,null,I().createElement(ge,{labelWidth:Pt,label:"Workflow",tooltip:"The workflow id number or file name (e.g my-workflow.yml)"},I().createElement(N.Input,{value:t,width:2*Et+Pt,onChange:e=>r(e.currentTarget.value),onBlur:t=>{return e.onChange((r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){dt(e,t,r[t])}))}return e}({},e),n=null!=(n={workflow:t.currentTarget.value})?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(n)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))})),r));var r,n}})))};function ht(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jt(){return jt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jt.apply(this,arguments)}function wt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){ht(e,t,r[t])}))}return e}const Pt=10,Et=36,St={[i.Repositories]:{component:(e,t)=>I().createElement(I().Fragment,null)},[i.Labels]:{component:(e,t)=>I().createElement(Ue,jt({},e.query.options||{},{onChange:t}))},[i.Contributors]:{component:(e,t)=>I().createElement(We,jt({},e.query.options||{},{onChange:t}))},[i.Tags]:{component:(e,t)=>I().createElement(Ge,jt({},e.query.options||{}))},[i.Releases]:{component:(e,t)=>I().createElement(we,jt({},e.query.options||{}))},[i.Commits]:{component:(e,t)=>I().createElement(Ee,jt({},e.query.options||{},{onChange:t}))},[i.Milestones]:{component:(e,t)=>I().createElement(Fe,jt({},e.query.options||{},{onChange:t}))},[i.Issues]:{component:(e,t)=>I().createElement(De,jt({},e.query.options||{},{onChange:t}))},[i.Packages]:{component:(e,t)=>I().createElement($e,jt({},e.query.options||{},{onChange:t}))},[i.Pull_Requests]:{component:(e,t)=>I().createElement(Qe,jt({},e.query.options||{},{onChange:t}))},[i.Vulnerabilities]:{component:(e,t)=>I().createElement(Ye,jt({},e.query.options||{},{onChange:t}))},[i.Projects]:{component:(e,t)=>I().createElement(ft,jt({},e.query.options||{},{onChange:t}))},[i.Stargazers]:{component:(e,t)=>I().createElement(I().Fragment,null)},[i.Workflows]:{component:(e,t)=>I().createElement(Ot,jt({},e.query.options||{},{onChange:t}))},[i.Workflow_Usage]:{component:(e,t)=>I().createElement(vt,jt({},e.query.options||{},{onChange:t}))}},kt=Object.keys(i).map((e=>({label:e.replace(/_/gi," "),value:e}))),Ct=[i.Projects,i.ProjectItems],Tt=e=>{const t=(0,x.useCallback)((t=>{e.onChange(t),O(t)&&e.onRunQuery()}),[e]),r=(0,x.useCallback)(((r,n)=>{var o,a;t((o=wt({},e.query),a=null!=(a={[r]:n})?a:{},Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(a)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(a)).forEach((function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(a,e))})),o))}),[t,e.query]),n=St[e.query.queryType||g],o=e.queryTypes||Object.keys(St);return I().createElement(I().Fragment,null,I().createElement(ge,{label:"Query Type",tooltip:"What resource are you querying for?",labelWidth:Pt},I().createElement("div",{"aria-label":ie.QueryEditor.QueryType.container.ariaLabel},I().createElement(N.Select,{menuShouldPortal:!0,width:Et,options:kt.filter((e=>o.includes(e.value))),value:e.query.queryType,onChange:e=>r("queryType",e.value||g)}))),(a=e.query.queryType,!Ct.includes(a)&&I().createElement(je,{repository:e.query.repository,owner:e.query.owner,onChange:r=>{t(wt({},e.query,r))}})),n?n.component(e,(e=>r("options",e||void 0))):I().createElement("span",null,"Unsupported Query Type"));var a},Dt=F.css`
  align-items: center;
`,qt=F.css`
  margin: 0px 3px;
  padding: 0px 3px;
`,Ft=e=>{const{onChange:t,options:r,value:n,width:o,loading:a}=e;return I().createElement("div",{className:`${Dt} gf-form-inline`},I().createElement(N.Select,{allowCustomValue:!0,value:n,onChange:e=>t(e.value),width:o,disabled:a,placeholder:a?"Loading...":"Select...",options:r.map((e=>({label:e,value:e})))}),a&&I().createElement("div",null,I().createElement(N.Spinner,{className:qt})))};function xt(e,t,r,n,o,a,l){try{var i=e[a](l),c=i.value}catch(e){return void r(e)}i.done?t(c):Promise.resolve(c).then(n,o)}function It(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function l(e){xt(a,n,o,l,i,"next",e)}function i(e){xt(a,n,o,l,i,"throw",e)}l(void 0)}))}}function Nt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Nt(e,t,r[t])}))}return e}function At(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const Qt=new e.DataSourcePlugin(q).setConfigEditor((t=>{const{jsonData:r,secureJsonData:n,secureJsonFields:o}=t.options,a=n||{},l=(0,N.useStyles2)(be),[i,c]=(0,x.useState)(r.githubUrl?"github-enterprise":"github-basic"),[u,s]=(0,x.useState)(!0),p=(e,r=!0)=>n=>{const{onOptionsChange:o,options:a}=t;o(pe(se({},a),{secureJsonData:pe(se({},a.secureJsonData),{[e]:n.target.value}),secureJsonFields:pe(se({},a.secureJsonFields),{[e]:r})}))};return I().createElement(I().Fragment,null,I().createElement(_,{dataSourceName:"GitHub",docsLink:"https://grafana.com/grafana/plugins/grafana-github-datasource/",hasRequiredFields:!1}),I().createElement(N.Divider,null),I().createElement(N.Collapse,{collapsible:!0,label:"Access Token Permissions",isOpen:u,onToggle:()=>s((e=>!e))},I().createElement("p",null,"To create a new Access Token, navigate to"," ",I().createElement("a",{className:l.externalLink,href:"https://github.com/settings/tokens",target:"_blank",rel:"noreferrer"},"Personal Access Tokens")," ",'and create a click "Generate new token."'),I().createElement("p",null,"Ensure that your token has the following permissions:"),I().createElement("b",null,"For all repositories:"),I().createElement("pre",null,"public_repo, repo:status, repo_deployment, read:packages, read:user, user:email"),I().createElement("b",null,"For Github projects:"),I().createElement("pre",null,"read:org, read:project"),I().createElement("b",null,"An extra setting is required for private repositories:"),I().createElement("pre",null,"repo (Full control of private repositories)")),I().createElement(N.Divider,null),I().createElement(le,{title:"Connection"},I().createElement(N.Field,{label:"Access Token"},I().createElement(N.SecretInput,{placeholder:"GitHub Personal Access Token","data-testid":ce.ConfigEditor.AccessToken,value:a.accessToken||"",isConfigured:o.accessToken,onChange:p("accessToken",!1),onReset:("accessToken",()=>{p("accessToken",!1)({target:{value:""}})}),width:40}))),I().createElement(N.Divider,null),I().createElement(le,{title:"Additional Settings",isCollapsible:!0},I().createElement(N.Label,null,"GitHub License"),I().createElement(N.RadioButtonGroup,{options:[{label:"Basic",value:"github-basic"},{label:"Enterprise",value:"github-enterprise"}],value:i,onChange:e=>{"github-basic"===e&&(r.githubUrl=""),c(e)},className:l.radioButton}),"github-enterprise"===i&&I().createElement(N.Field,{label:"GitHub Enterprise URL"},I().createElement(N.Input,{placeholder:"URL of GitHub Enterprise",value:r.githubUrl,onChange:(0,e.onUpdateDatasourceJsonDataOption)(t,"githubUrl"),width:40}))))})).setVariableQueryEditor((e=>{const t=`${e.datasource.name} - ${e.query.queryType||g}`,[r,n]=(0,x.useState)();return(0,x.useMemo)(It((function*(){O(e.query)&&n(yield e.datasource.getChoices(e.query))})),[e.query,e.datasource]),I().createElement(I().Fragment,null,I().createElement(Tt,{query:e.query,datasource:e.datasource,onChange:r=>e.onChange(At(Rt({},r),{field:e.query.field}),t),onRunQuery:()=>{},queryTypes:[i.Repositories,i.Contributors,i.Tags,i.Releases,i.Labels,i.Milestones,i.Projects]}),I().createElement(ge,{width:10,labelWidth:10,label:"Field Value",tooltip:"This field determines the value used for the variable"},I().createElement(Ft,{onChange:r=>e.onChange(At(Rt({},e.query),{key:r}),t),options:r||[],width:64,value:e.query.key,loading:!r})),I().createElement(ge,{width:10,labelWidth:10,label:"Field Display",tooltip:"This field determines the text used for the variable"},I().createElement(Ft,{onChange:r=>e.onChange(At(Rt({},e.query),{field:r}),t),options:r||[],width:64,value:e.query.field,loading:!r})))})).setQueryEditor(Tt)})(),u})()));
//# sourceMappingURL=module.js.map